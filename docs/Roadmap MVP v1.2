# KYNDO ‚Äî ROADMAP MVP T√âCNICO v1.2

**Objetivo:** Definir **qu√© se construye primero**, **qu√© se excluye expl√≠citamente** y **en qu√© orden** para lanzar un MVP funcional de KYNDO sin deuda innecesaria.

**Principio rector:** *Si no es imprescindible para validar el n√∫cleo, no entra al MVP.*

---

## 0. Definici√≥n estricta de MVP

El MVP de KYNDO debe permitir:

1. ‚úÖ Jugar **Memory Nivel 1** (grados 1-5) con progresi√≥n real
2. ‚úÖ Sistema de **grados escalables** (20‚Üí30‚Üí42‚Üí56‚Üí72 cartas)
3. ‚úÖ **L√≠mite de intentos** con castigo por repetir errores
4. ‚úÖ **Sistema de racha** con bonos acumulativos
5. ‚úÖ **Persistencia local** (LocalStorage) del grado actual
6. ‚úÖ **Colecci√≥n b√°sica** (ver cartas desbloqueadas)

**M√©tricas de √©xito del MVP:**
- ‚â•60% de usuarios completan Grado 1
- ‚â•30% de usuarios llegan a Grado 3+
- ‚â•10% de usuarios alcanzan Grado 5
- 0 bugs cr√≠ticos de bloqueo
- Jugabilidad fluida en mobile (Android/iOS)

---

## 1. Alcance funcional INCLUIDO

### 1.1 Dominio inicial

- ‚úÖ **Un solo dominio** (Aves)
- ‚úÖ Cat√°logo reducido: 20-50 objetos reales
- ‚úÖ Todos los objetos existen en BD desde el inicio
- ‚úÖ M√≠nimo 2 variantes visuales por objeto (regla cognitiva)
- ‚úÖ Arte generado con IA (NanoBanana o similar)
- ‚úÖ Optimizaci√≥n WebP

**Objetos sugeridos para MVP (Aves):**
- √Åguila Real
- Halc√≥n Peregrino
- C√≥ndor Andino
- B√∫ho Nival
- Colibr√≠
- Tuc√°n
- Ping√ºino Emperador
- Flamenco
- Loro Guacamayo
- Pel√≠cano
- *(Total: 20-50 especies variadas visualmente)*

---

### 1.2 Autenticaci√≥n y jugador

- ‚úÖ Login b√°sico (email simple, sin verificaci√≥n en MVP)
- ‚úÖ Creaci√≥n de `players`
- ‚úÖ Inicializaci√≥n de `player_state`
- ‚úÖ Dominio activo fijo (Aves)
- ‚ùå OAuth (Google/Apple) ‚Üí **Post-MVP**
- ‚ùå Recuperaci√≥n de contrase√±a ‚Üí **Post-MVP**

---

### 1.3 Memory Mode (N√öCLEO DEL MVP)

**Incluye:**

#### **Sistema de grados (1-5)**
```javascript
const gradeConfig = {
  1: 20,  // 5√ó4, 10 pares, 22 intentos
  2: 30,  // 6√ó5, 15 pares, 33 intentos
  3: 42,  // 7√ó6, 21 pares, 46 intentos
  4: 56,  // 8√ó7, 28 pares, 62 intentos
  5: 72,  // 9√ó8, 36 pares, 79 intentos
};
```

#### **Mec√°nicas core**
- ‚úÖ Generaci√≥n determin√≠stica por `seed`
- ‚úÖ Grid din√°mico: `columns = ceil(sqrt(totalCards))`
- ‚úÖ L√≠mite de intentos: `totalPares √ó 2.2`
- ‚úÖ Castigo por repetir error: `+1 intento`, `-2 puntos`
- ‚úÖ Sistema de racha: `5 √ó (racha - 1)` bono acumulativo
- ‚úÖ Overlay de foco (carta grande)
- ‚úÖ Estados visuales: `hidden`, `revealed`, `pending`, `matched`
- ‚úÖ Limpieza de pending (click para continuar)
- ‚úÖ Condici√≥n de ascenso: completar + dentro del l√≠mite

#### **Persistencia**
- ‚úÖ LocalStorage para grado actual
- ‚úÖ Key: `kyndo_memory_v1`
- ‚úÖ Estructura: `{ memoryGrade: number }`

#### **UX/UI**
- ‚úÖ HUD completo (pares, intentos, racha, puntaje, grado)
- ‚úÖ Pantalla de resultado (victoria/no superado)
- ‚úÖ Botones: Continuar / Reintentar / Cerrar
- ‚úÖ Responsive mobile-first
- ‚úÖ Sin animaciones complejas (transiciones CSS b√°sicas OK)

**Excluye en MVP:**
- ‚ùå Tutoriales interactivos
- ‚ùå IA adaptativa de dificultad
- ‚ùå Hints o ayudas
- ‚ùå Modo contra reloj
- ‚ùå Sonidos (audio opcional, no cr√≠tico)

---

### 1.4 Sistema de cartas

**Incluye:**
- ‚úÖ Carta A visible al descubrir objeto (Memory)
- ‚úÖ Cartas B y C **existen en BD** pero bloqueadas
- ‚úÖ Desbloqueo autom√°tico v√≠a progreso en Memory (l√≥gica simple)
- ‚úÖ Estados visuales obligatorios: `hidden`, `discovered`, `unlocked`
- ‚úÖ Visualizaci√≥n simple (sin animaciones de flip complejas)

**Desbloqueo sugerido (MVP):**
```javascript
// Carta A: autom√°tica al completar 1 par con ese objeto
// Carta B: completar grado 3 con ese objeto
// Carta C: completar grado 5 con ese objeto
```

**Excluye en MVP:**
- ‚ùå Carta C con habilidades activas (solo visual)
- ‚ùå Sistema de rareza complejo
- ‚ùå Animaciones de desbloqueo elaboradas

---

### 1.5 Motor A/D (preparaci√≥n, NO jugable en MVP)

**Incluye (solo backend/BD):**
- ‚úÖ Tablas: `attack_factors`, `defense_factors`, `rulesets`
- ‚úÖ Factores asignados a todos los objetos (0-10)
- ‚úÖ Ruleset v1.0.0 creado
- ‚úÖ Funciones SQL: `calculate_attack()`, `calculate_defense()`

**NO incluye:**
- ‚ùå Modo Battle jugable (UI/UX)
- ‚ùå Matchmaking
- ‚ùå Combates reales

**Raz√≥n:** Validar Memory primero. Battle es fase post-MVP prioritaria.

---

### 1.6 Colecci√≥n

**Incluye:**
- ‚úÖ Pantalla de colecci√≥n b√°sica
- ‚úÖ Grid de cartas (scroll vertical)
- ‚úÖ Filtro por estado: Todas / Desbloqueadas
- ‚úÖ Zoom de carta (modal simple)
- ‚úÖ Visualizaci√≥n de:
  - Nombre com√∫n
  - Nombre cient√≠fico (si unlocked)
  - Im√°genes (variantes)
  - Estado (`hidden` = silueta)

**Excluye:**
- ‚ùå Filtros avanzados (rareza, dominio)
- ‚ùå B√∫squeda por nombre
- ‚ùå Comparaci√≥n de cartas
- ‚ùå Estad√≠sticas detalladas por carta

---

## 2. Alcance EXPL√çCITAMENTE EXCLUIDO

Esto **NO** entra al MVP, aunque exista en la visi√≥n:

### ‚ùå **Monetizaci√≥n**
- Tienda
- Compra de packs
- Moneda dura
- Suscripciones
- Ads

### ‚ùå **Social**
- Amigos
- Chat
- Compartir en redes
- Leaderboards globales

### ‚ùå **Backend completo**
- API real (usar LocalStorage en MVP)
- Cuentas en servidor
- Sincronizaci√≥n multi-dispositivo
- Cloud save

### ‚ùå **Modos adicionales**
- Memory Nivel 2 (variantes visuales)
- Memory Nivel 3 (objetos similares)
- Battle A/D jugable
- Enciclopedia interactiva
- Quiz
- Conquista Temporal de Cartas

### ‚ùå **Features avanzadas**
- Animaciones complejas (part√≠culas, confetti)
- Sonidos y m√∫sica
- Tutorial interactivo paso a paso
- Sistema de logros
- Estad√≠sticas hist√≥ricas detalladas
- Replay de partidas
- Modo oscuro
- Multiidioma

### ‚ùå **Infraestructura**
- PWA instalable (puede agregarse f√°cilmente post-MVP)
- Notificaciones push
- Offline-first completo
- Analytics avanzado

**Nota:** Excluir esto es una **decisi√≥n estrat√©gica**, no una limitaci√≥n. Queremos validar el n√∫cleo antes de agregar complejidad.

---

## 3. Orden de implementaci√≥n (ESTRICTO)

### üîµ **FASE 1 ‚Äî Fundaciones (Semana 1-2)**

**Objetivo:** Infraestructura m√≠nima funcional

**Tareas:**

1. **Base de datos (3 d√≠as)**
   - Crear esquema completo (seg√∫n Esquema-BD.md v1.2)
   - Scripts de migraci√≥n
   - Funciones auxiliares (`calculate_attack`, `calculate_defense`)
   - Seed de datos de prueba (20 objetos del dominio Aves)

2. **Pipeline de contenido (4 d√≠as)**
   - Definir SVG base (marco de carta)
   - Generar 40+ im√°genes IA (2 por objeto √ó 20 objetos)
   - Optimizar a WebP
   - Popular tablas: `objects`, `object_images`, `cards`
   - Asignar factores A/D a todos los objetos
   - Crear ruleset v1.0.0

3. **Autenticaci√≥n b√°sica (2 d√≠as)**
   - Login simple (email hardcodeado para pruebas)
   - Funci√≥n `initialize_new_player()`
   - LocalStorage para sesi√≥n

4. **Estado inicial (1 d√≠a)**
   - Inicializar `player_state`
   - Inicializar `player_session_state`
   - Inicializar `player_wallet`
   - Inicializar `player_card_state` (todas hidden)

**Entregable:** BD poblada, contenido generado, login funcional

---

### üü¢ **FASE 2 ‚Äî Memory Core (Semana 3-4)**

**Objetivo:** Juego Memory completamente funcional

**Tareas:**

1. **Motor de tablero (5 d√≠as)**
   - Funci√≥n `startRun()`
   - Grid din√°mico seg√∫n `gradeConfig`
   - Generaci√≥n determin√≠stica (seed)
   - Render de cartas en DOM
   - Estados visuales (CSS)

2. **L√≥gica de juego (4 d√≠as)**
   - Click en carta ‚Üí reveal
   - Overlay de foco
   - Evaluaci√≥n de par (`resolvePair`)
   - Sistema de intentos
   - Castigo por repetir error
   - Sistema de racha
   - `checkEndOfLevel()`

3. **HUD y feedback (2 d√≠as)**
   - Contador de pares
   - Contador de intentos
   - Indicador de racha
   - Puntaje en tiempo real
   - Indicador de grado actual

4. **Pantalla de resultado (1 d√≠a)**
   - Modal de victoria/no superado
   - Resumen de m√©tricas
   - Botones: Continuar / Reintentar
   - L√≥gica de ascenso de grado

5. **Persistencia local (1 d√≠a)**
   - Guardar `memoryGrade` en LocalStorage
   - Cargar al iniciar
   - Validar integridad

**Entregable:** Memory Nivel 1 jugable de principio a fin, grados 1-5 funcionales

---

### üü° **FASE 3 ‚Äî Cartas y Colecci√≥n (Semana 5)**

**Objetivo:** Sistema de progreso visible

**Tareas:**

1. **Desbloqueos (2 d√≠as)**
   - L√≥gica de desbloqueo por progreso
   - Actualizar `player_card_state`
   - Feedback visual de desbloqueo (simple)

2. **Pantalla de colecci√≥n (3 d√≠as)**
   - Grid de cartas
   - Estados visuales (silueta/revelada/desbloqueada)
   - Filtro b√°sico
   - Zoom de carta (modal)
   - Datos del objeto (nombre, cient√≠fico)

3. **Integraci√≥n (2 d√≠as)**
   - Navegaci√≥n Home ‚Üî Memory ‚Üî Colecci√≥n
   - Sincronizaci√≥n de estado
   - Testing de flujo completo

**Entregable:** Colecci√≥n funcional, desbloqueos visibles, progreso persistente

---

### üü† **FASE 4 ‚Äî Preparaci√≥n A/D (Semana 6)**

**Objetivo:** Backend listo para Battle (sin UI)

**Tareas:**

1. **Factores A/D (2 d√≠as)**
   - Asignar factores a todos los objetos (si no se hizo en Fase 1)
   - Validar balanceo b√°sico
   - Crear ruleset v1.0.0
   - Testear funciones `calculate_attack/defense`

2. **Tablas de batalla (1 d√≠a)**
   - `battles`
   - `battle_participants`
   - `battle_rounds`
   - Scripts de inserci√≥n de prueba

3. **Documentaci√≥n (2 d√≠as)**
   - Documentar f√≥rmulas
   - Ejemplos de c√°lculos
   - Preparar para implementaci√≥n UI (post-MVP)

**Entregable:** Backend A/D completo, listo para integrar UI en post-MVP

---

### üî¥ **FASE 5 ‚Äî Pulido MVP (Semana 7-8)**

**Objetivo:** Producto estable y testeado

**Tareas:**

1. **Testing exhaustivo (5 d√≠as)**
   - Testing en m√≥viles reales (Android/iOS)
   - Testing en diferentes tama√±os de pantalla
   - Testing de todos los grados (1-5)
   - Testing de casos extremos:
     - Completar con exactamente `maxAttempts`
     - Completar con `maxAttempts + 1`
     - Abandonar partida
     - Reintentar m√∫ltiples veces
   - Bug fixing

2. **Optimizaci√≥n (3 d√≠as)**
   - Performance en grado 5 (72 cartas)
   - Optimizaci√≥n de im√°genes si es necesario
   - Reducir tama√±o de assets
   - Lazy loading de im√°genes (opcional)

3. **UX refinements (2 d√≠as)**
   - Transiciones CSS suaves
   - Feedback visual mejorado
   - Loading states
   - Error handling

4. **Documentaci√≥n final (2 d√≠as)**
   - README actualizado
   - CHANGELOG.md inicial
   - Gu√≠a de instalaci√≥n
   - Preparar para deploy

**Entregable:** MVP estable, testeado, listo para usuarios beta

---

## 4. Criterios de aceptaci√≥n por fase

### ‚úÖ **Fase 1 ‚Äî Fundaciones**
- [ ] BD creada con esquema completo
- [ ] 20 objetos con 2 im√°genes cada uno
- [ ] Login funciona (aunque sea hardcodeado)
- [ ] Jugador se inicializa correctamente

### ‚úÖ **Fase 2 ‚Äî Memory Core**
- [ ] Puedo jugar una partida completa
- [ ] Grid se calcula correctamente (5√ó4, 6√ó5, etc.)
- [ ] L√≠mite de intentos funciona
- [ ] Castigo por repetir error funciona
- [ ] Racha se calcula correctamente
- [ ] Ascenso de grado funciona
- [ ] LocalStorage persiste el grado

### ‚úÖ **Fase 3 ‚Äî Cartas y Colecci√≥n**
- [ ] Cartas se desbloquean seg√∫n progreso
- [ ] Colecci√≥n muestra estado correcto
- [ ] Puedo ver detalle de carta desbloqueada
- [ ] Navegaci√≥n entre pantallas funciona

### ‚úÖ **Fase 4 ‚Äî Preparaci√≥n A/D**
- [ ] Todos los objetos tienen factores A/D
- [ ] Funciones SQL calculan valores correctamente
- [ ] Ruleset v1.0.0 existe y es v√°lido

### ‚úÖ **Fase 5 ‚Äî Pulido**
- [ ] 0 bugs cr√≠ticos
- [ ] Funciona en mobile (Android + iOS)
- [ ] Performance aceptable (60fps en grado 5)
- [ ] Documentaci√≥n completa

---

## 5. Post-MVP Priorizado

Una vez completado el MVP (8 semanas), estas son las expansiones priorizadas:

### ü•á **P1: Memory PvP As√≠ncrono (2-3 semanas)**

**Por qu√© primero:**
- Reutiliza 100% de la l√≥gica de Memory existente
- No requiere tiempo real (m√°s f√°cil)
- Aumenta engagement dram√°ticamente
- Prepara terreno para Battle A/D

**Features:**
- Matchmaking basado en MMR
- Misma seed para ambos jugadores
- Comparaci√≥n de resultados (pares ‚Üí puntos ‚Üí intentos)
- Recompensas y ajuste de MMR
- Tabla nueva: `memory_pvp_matches`

**Endpoints nuevos:**
```
POST /memory/pvp/matchmake
POST /memory/pvp/finish
GET  /memory/pvp/leaderboard (opcional)
```

---

### ü•à **P2: Backend real + sincronizaci√≥n (3-4 semanas)**

**Por qu√© segundo:**
- Permite progreso multi-dispositivo
- Preparaci√≥n para monetizaci√≥n
- An√°lisis de m√©tricas real
- Base para features sociales

**Tareas:**
- Migrar de LocalStorage a API real
- Implementar todos los endpoints (Checklist-Endpoints.md)
- JWT authentication
- Cloud hosting (Vercel/Railway/Fly.io)
- PostgreSQL managed (Supabase/Neon)

---

### ü•â **P3: Battle A/D jugable (2-3 semanas)**

**Por qu√© tercero:**
- Ya est√° el backend preparado (Fase 4)
- Solo falta UI/UX
- Modo diferenciado de Memory
- Usa sistema de cartas completo

**Features:**
- Pantalla de batalla
- Selecci√≥n de carta
- Animaci√≥n de comparaci√≥n A/D
- Resultado por rondas
- Ajuste de MMR

---

### üèÖ **P4: Sistema de logros y estad√≠sticas (1-2 semanas)**

**Features:**
- Historial de partidas
- R√©cords personales por grado
- Badges desbloqueables
- Gr√°ficas de progreso
- Comparaci√≥n con promedio global

---

### üèÖ **P5: Memory Nivel 2 ‚Äî Variantes visuales (3-4 semanas)**

**Features:**
- 2+ im√°genes del mismo objeto
- Emparejar variantes (no duplicados exactos)
- Movimientos de tablero (rotaciones de filas/columnas)
- Grados 1-5 con mayor dificultad cognitiva
- Desbloqueo de Carta C con habilidades reales

---

### üèÖ **P6: PWA + Monetizaci√≥n (2-3 semanas)**

**Features:**
- Manifest.json
- Service worker (offline b√°sico)
- Instalable en home screen
- Freemium: grados 1-3 gratis, resto con unlock
- Stripe Checkout integrado
- Precio sugerido: $4.99 unlock completo

---

## 6. Recursos necesarios

### **Equipo m√≠nimo MVP:**
- 1 desarrollador full-stack (t√∫)
- 1 generador de im√°genes IA (NanoBanana/Stable Diffusion)
- 1 dise√±ador vectorial (SVG base) ‚Äî opcional si usas templates

### **Herramientas:**
- Editor: VS Code
- BD: PostgreSQL local (Docker) o SQLite para pruebas
- IA: NanoBanana API / Replicate
- Assets: Figma / Inkscape (SVG)
- Deploy: Vercel / Netlify (frontend), Railway (backend futuro)
- Version control: GitHub

### **Tiempo estimado:**
- **MVP completo:** 8 semanas (1 desarrollador, medio tiempo)
- **MVP + P1 (PvP):** 10-11 semanas
- **MVP + P1 + P2 (Backend):** 14-15 semanas

---

## 7. Riesgos y mitigaciones

### ‚ö†Ô∏è **Riesgo 1: Generaci√≥n de contenido lenta**

**Impacto:** Fase 1 se extiende

**Mitigaci√≥n:**
- Empezar generaci√≥n de im√°genes en paralelo a desarrollo de BD
- Usar 10 objetos inicialmente, escalar a 20 despu√©s
- Batch prompts en NanoBanana

---

### ‚ö†Ô∏è **Riesgo 2: Balance de grados incorrecto**

**Impacto:** Usuarios frustrados o aburridos

**Mitigaci√≥n:**
- Testing interno exhaustivo en Fase 5
- Beta cerrada con 10-20 usuarios
- Par√°metros editables (`ATTEMPT_FACTOR`, etc.)
- Iteraci√≥n r√°pida post-lanzamiento

---

### ‚ö†Ô∏è **Riesgo 3: Performance en grado 5 (72 cartas)**

**Impacto:** Lag en mobile

**Mitigaci√≥n:**
- Testing temprano en dispositivos reales
- Optimizaci√≥n de im√°genes (WebP, tama√±o reducido)
- Lazy rendering (solo cartas visibles)
- CSS transforms (hardware-accelerated)

---

### ‚ö†Ô∏è **Riesgo 4: Scope creep**

**Impacto:** MVP nunca termina

**Mitigaci√≥n:**
- **Este documento es vinculante**
- Decir NO a features no listadas
- Registrar ideas en backlog para post-MVP
- Revisi√≥n semanal de scope

---

## 8. M√©tricas de √©xito

### **M√©tricas t√©cnicas (MVP):**
- ‚úÖ 0 bugs cr√≠ticos de bloqueo
- ‚úÖ Performance: ‚â•60fps en grado 5 (mobile)
- ‚úÖ Tiempo de carga: <3s (primera visita)
- ‚úÖ Tama√±o total: <5MB (con assets)

### **M√©tricas de jugabilidad (primeros 100 usuarios):**
- ‚úÖ ‚â•60% completan grado 1
- ‚úÖ ‚â•30% llegan a grado 3+
- ‚úÖ ‚â•10% alcanzan grado 5
- ‚úÖ Tiempo promedio por grado: 3-7 minutos
- ‚úÖ Tasa de abandono: <40% en grado 1

### **M√©tricas de retenci√≥n (primera semana):**
- ‚úÖ D1 retention: ‚â•40%
- ‚úÖ D7 retention: ‚â•20%
- ‚úÖ Sesiones promedio: ‚â•2 por d√≠a

**Si estas m√©tricas se cumplen ‚Üí MVP exitoso ‚Üí Continuar con post-MVP**

---

## 9. Definici√≥n de "Hecho"

Una fase se considera **completa** solo si:

1. ‚úÖ Todos los criterios de aceptaci√≥n cumplidos
2. ‚úÖ Testing manual exitoso
3. ‚úÖ 0 bugs conocidos de severidad alta
4. ‚úÖ C√≥digo commiteado y pusheado
5. ‚úÖ Documentaci√≥n actualizada
6. ‚úÖ Demo funcional disponible

**No hay medias tintas. O est√° hecho o no est√° hecho.**

---

## 10. Regla final

**Si una feature no est√° en este roadmap, NO se construye hasta completar el MVP.**

Esto no es rigidez, es **disciplina**. El objetivo es lanzar r√°pido, validar, iterar.

---

## Estado del documento

- **Versi√≥n:** v1.2
- **Dependencia:** Manual Maestro v1.02, Manual T√©cnico v1.2, Manual UX/UI v1.0
- **√öltima actualizaci√≥n:** Enero 2025

**Cambios clave v1.2:**
- Orden de fases estricto con semanas estimadas
- Criterios de aceptaci√≥n por fase
- Post-MVP priorizado (PvP primero)
- Riesgos y mitigaciones
- M√©tricas de √©xito cuantificables
- Definici√≥n de "Hecho"

---

**Fin del Roadmap MVP v1.2**

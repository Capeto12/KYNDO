<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KYNDO - Batalla de Mazos</title>
  <!-- Cache bust for latest UI -->
  <link rel="stylesheet" href="./css/styles.css?v=20260202-4">
</head>
<body style="margin:0; padding:0;">
  <div class="page-shell">
    <header>
      <div class="header-bar">
        <a class="brand-link" href="../index.html">
          <div class="brand-block">
            <h1 class="brand-title">Kindo</h1>
            <div class="brand-subtitle">Kombat</div>
          </div>
        </a>

        <div class="hud-block" aria-label="Estado de batalla">
          <div class="hud-row hud-meta">
            <span>Nivel <span id="battle-hud-level">1</span></span>
            <span>Grado <span id="battle-hud-grade">1</span></span>
          </div>
          <div class="hud-row">
            <span>Game <span id="battle-hud-game">1</span>/<span id="battle-hud-gamesTotal">8</span></span>
            <span>Ronda <span id="battle-hud-round">1</span>/<span id="battle-hud-roundsPerGame">5</span></span>
            <span>Game points <span id="battle-hud-score">0-0-0</span></span>
          </div>
        </div>

        <div class="actions-block">
          <div id="user-info">
            <div class="player-info" id="battle-player">
              <div class="player-avatar">ðŸ‘¤</div>
              <div class="player-name">Jugador</div>
            </div>
            <div class="player-info" id="battle-opponent" style="display: none;">
              <div class="player-avatar">ðŸ‘¤</div>
              <div class="player-name">Oponente</div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="page-main">
      <div id="battleContainer"></div>
    </main>

    <footer>
      <p style="font-size:12px; opacity:.65;">KYNDO - Cognitive Card Game Engine</p>
    </footer>
  </div>

  <script type="module">
    console.log('Battle UI version 2026-02-02-4');
    import { DemoBattleController } from './js/battle-controller.js';

    const battleContainer = document.getElementById('battleContainer');
    let currentController = null;

    async function startBattle() {
      if (currentController) {
        currentController.reset();
      }

      currentController = new DemoBattleController();
      const battleUI = await currentController.startDemo();
      battleContainer.innerHTML = '';
      battleContainer.appendChild(battleUI);
    }

    // Auto-launch arena on load so Kombat opens straight into the battle view
    startBattle();

    console.log('Battle Demo loaded. Arena auto-started.');
  </script>
</body>
</html>
